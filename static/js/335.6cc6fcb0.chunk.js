"use strict";(self.webpackChunkbling_staff=self.webpackChunkbling_staff||[]).push([[335],{1386:(e,r,n)=>{n.d(r,{R$:()=>s,ts:()=>t,uK:()=>a});var o=n(69525);function s(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"MM-dd-yyyy";return(0,o.A)(new Date(e),r)}function t(e){return(0,o.A)(new Date(e),"dd MMMM yyyy")}function a(e){return(0,o.A)(new Date(e),"dd MMM yyyy HH:mm")}},22698:(e,r,n)=>{n.d(r,{A:()=>B});var o=n(58168),s=n(98587),t=n(65043),a=(n(2086),n(69292)),l=n(98610),i=n(32463),d=n(34535),c=n(72876),p=n(85865),u=n(84794),m=n(66734),x=n(70579);const v=(0,m.A)((0,x.jsx)("path",{d:"M6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}),"MoreHoriz");var h=n(75429);const f=["slots","slotProps"],b=(0,d.Ay)(h.A)((e=>{let{theme:r}=e;return(0,o.A)({display:"flex",marginLeft:`calc(${r.spacing(1)} * 0.5)`,marginRight:`calc(${r.spacing(1)} * 0.5)`},"light"===r.palette.mode?{backgroundColor:r.palette.grey[100],color:r.palette.grey[700]}:{backgroundColor:r.palette.grey[700],color:r.palette.grey[100]},{borderRadius:2,"&:hover, &:focus":(0,o.A)({},"light"===r.palette.mode?{backgroundColor:r.palette.grey[200]}:{backgroundColor:r.palette.grey[600]}),"&:active":(0,o.A)({boxShadow:r.shadows[0]},"light"===r.palette.mode?{backgroundColor:(0,u.tL)(r.palette.grey[200],.12)}:{backgroundColor:(0,u.tL)(r.palette.grey[600],.12)})})})),j=(0,d.Ay)(v)({width:24,height:16});const g=function(e){const{slots:r={},slotProps:n={}}=e,t=(0,s.A)(e,f),a=e;return(0,x.jsx)("li",{children:(0,x.jsx)(b,(0,o.A)({focusRipple:!0},t,{ownerState:a,children:(0,x.jsx)(j,(0,o.A)({as:r.CollapsedIcon,ownerState:a},n.collapsedIcon))}))})};var y=n(92532),A=n(72372);function _(e){return(0,A.Ay)("MuiBreadcrumbs",e)}const w=(0,y.A)("MuiBreadcrumbs",["root","ol","li","separator"]),k=["children","className","component","slots","slotProps","expandText","itemsAfterCollapse","itemsBeforeCollapse","maxItems","separator"],S=(0,d.Ay)(p.A,{name:"MuiBreadcrumbs",slot:"Root",overridesResolver:(e,r)=>[{[`& .${w.li}`]:r.li},r.root]})({}),C=(0,d.Ay)("ol",{name:"MuiBreadcrumbs",slot:"Ol",overridesResolver:(e,r)=>r.ol})({display:"flex",flexWrap:"wrap",alignItems:"center",padding:0,margin:0,listStyle:"none"}),q=(0,d.Ay)("li",{name:"MuiBreadcrumbs",slot:"Separator",overridesResolver:(e,r)=>r.separator})({display:"flex",userSelect:"none",marginLeft:8,marginRight:8});function I(e,r,n,o){return e.reduce(((s,t,a)=>(a<e.length-1?s=s.concat(t,(0,x.jsx)(q,{"aria-hidden":!0,className:r,ownerState:o,children:n},`separator-${a}`)):s.push(t),s)),[])}const B=t.forwardRef((function(e,r){const n=(0,c.A)({props:e,name:"MuiBreadcrumbs"}),{children:d,className:p,component:u="nav",slots:m={},slotProps:v={},expandText:h="Show path",itemsAfterCollapse:f=1,itemsBeforeCollapse:b=1,maxItems:j=8,separator:y="/"}=n,A=(0,s.A)(n,k),[w,q]=t.useState(!1),B=(0,o.A)({},n,{component:u,expanded:w,expandText:h,itemsAfterCollapse:f,itemsBeforeCollapse:b,maxItems:j,separator:y}),M=(e=>{const{classes:r}=e;return(0,l.A)({root:["root"],li:["li"],ol:["ol"],separator:["separator"]},_,r)})(B),R=(0,i.Q)({elementType:m.CollapsedIcon,externalSlotProps:v.collapsedIcon,ownerState:B}),$=t.useRef(null),D=t.Children.toArray(d).filter((e=>t.isValidElement(e))).map(((e,r)=>(0,x.jsx)("li",{className:M.li,children:e},`child-${r}`)));return(0,x.jsx)(S,(0,o.A)({ref:r,component:u,color:"text.secondary",className:(0,a.A)(M.root,p),ownerState:B},A,{children:(0,x.jsx)(C,{className:M.ol,ref:$,ownerState:B,children:I(w||j&&D.length<=j?D:(e=>b+f>=e.length?e:[...e.slice(0,b),(0,x.jsx)(g,{"aria-label":h,slots:{CollapsedIcon:m.CollapsedIcon},slotProps:{collapsedIcon:R},onClick:()=>{q(!0);const e=$.current.querySelector("a[href],button,[tabindex]");e&&e.focus()}},"ellipsis"),...e.slice(e.length-f,e.length)])(D),M.separator,y,B)})}))}))},24753:(e,r,n)=>{n.d(r,{A:()=>m});var o=n(90620),s=n.n(o),t=n(96446),a=n(85865),l=n(88446),i=n(35475),d=n(22698),c=n(70579);function p(e){let{links:r,activeLast:n=!1,...o}=e;const s=r[r.length-1].name,l=r.map((e=>(0,c.jsx)(u,{link:e},e.name))),i=r.map((e=>(0,c.jsx)("div",{children:e.name!==s?(0,c.jsx)(u,{link:e}):(0,c.jsx)(a.A,{variant:"body2",sx:{maxWidth:260,overflow:"hidden",whiteSpace:"nowrap",color:"text.disabled",textOverflow:"ellipsis"},children:s})},e.name)));return(0,c.jsx)(d.A,{separator:(0,c.jsx)(t.A,{component:"span",sx:{width:4,height:4,borderRadius:"50%",bgcolor:"text.disabled"}}),...o,children:n?l:i})}function u(e){let{link:r}=e;const{href:n,name:o,icon:s}=r;return(0,c.jsxs)(l.A,{variant:"body2",component:i.N_,to:n||"#",sx:{lineHeight:2,display:"flex",alignItems:"center",color:"text.primary","& > div":{display:"inherit"}},children:[s&&(0,c.jsx)(t.A,{sx:{mr:1,"& svg":{width:20,height:20}},children:s}),o]},o)}function m(e){let{links:r,action:n,heading:o,moreLink:i=[],sx:d,...u}=e;return(0,c.jsxs)(t.A,{sx:{mb:5,...d},children:[(0,c.jsxs)(t.A,{sx:{display:"flex",alignItems:"center"},children:[(0,c.jsxs)(t.A,{sx:{flexGrow:1},children:[(0,c.jsx)(a.A,{variant:"h4",gutterBottom:!0,children:o}),(0,c.jsx)(p,{links:r,...u})]}),n&&(0,c.jsx)(t.A,{sx:{flexShrink:0},children:n})]}),(0,c.jsx)(t.A,{sx:{mt:2},children:s()(i)?(0,c.jsx)(l.A,{href:i,target:"_blank",rel:"noopener",variant:"body2",children:i}):i.map((e=>(0,c.jsx)(l.A,{noWrap:!0,href:e,variant:"body2",target:"_blank",rel:"noopener",sx:{display:"table"},children:e},e)))})]})}},50716:(e,r,n)=>{n.d(r,{A:()=>o});const o=e=>{var r;if(null!==(r=e.response)&&void 0!==r&&r.data){if("string"===typeof e.response.data)return e.response.data;if(Array.isArray(e.response.data))return e.response.data[0];if(e.response.data.detail)return e.response.data.detail}return"An error occurred. Please try again."}},76335:(e,r,n)=>{n.r(r),n.d(r,{default:()=>R});var o=n(65043),s=n(83665),t=n(73216),a=n(19252),l=n(48407),i=n(56056),d=n(11737),c=n(18175),p=n(19838),u=n(24753),m=n(73033),x=n(24858),v=n(18403),h=n(72812),f=n(68903),b=n(12110),j=n(96446),g=n(85865),y=n(88911),A=n(73338),_=n(1386),w=n(50467),k=(n(20974),n(73601)),S=n(34866),C=n(43409),q=n(50716),I=n(14961),B=n(70579);function M(e){let{isEdit:r,currentSupervisor:n}=e;const a=(0,t.Zp)(),{t:d}=(0,I.B)(),{enqueueSnackbar:p}=(0,s.dh)(),u=(m.Ik().shape({type_id:m.Yj().required(d("field.required",{obj:d("field.type_id")})),number_id:m.Yj().required(d("field.required",{obj:d("field.number_id")})),created_on:m.Yj().required(d("field.required",{obj:d("field.created_on")})),expired_on:m.Yj().required(d("field.required",{obj:d("field.expired_on")}))}),m.Ik().shape({phone:m.Yj().required(d("field.required",{obj:d("field.phone")})),first_name:m.Yj().required(d("field.required",{obj:d("field.first_name")})),last_name:m.Yj().required(d("field.required",{obj:d("field.last_name")})),percent:m.ai().required(d("field.required",{obj:d("field.percent")})),percent_more:m.ai().required(d("field.required",{obj:`${d("field.percent")} more`}))})),M=(0,o.useMemo)((()=>({username:(null===n||void 0===n?void 0:n.username)||"",email:(null===n||void 0===n?void 0:n.email)||"",phone:(null===n||void 0===n?void 0:n.phone)||"",first_name:(null===n||void 0===n?void 0:n.first_name)||"",last_name:(null===n||void 0===n?void 0:n.last_name)||"",photo:(null===n||void 0===n?void 0:n.photo)||null,country:(null===n||void 0===n?void 0:n.country)||"",city:(null===n||void 0===n?void 0:n.city)||"",address:(null===n||void 0===n?void 0:n.address)||"",born_date:(0,_.R$)((null===n||void 0===n?void 0:n.born_date)||new Date),is_block:(null===n||void 0===n?void 0:n.is_block)||!1,transfer_opt_in:(null===n||void 0===n?void 0:n.transfer_opt_in)||!1,genre:(null===n||void 0===n?void 0:n.genre)||"",marital:(null===n||void 0===n?void 0:n.marital)||"",description:(null===n||void 0===n?void 0:n.description)||"",password:null,percent:(null===n||void 0===n?void 0:n.percent)||0,percent_more:(null===n||void 0===n?void 0:n.percent_more)||0,keyId:(null===n||void 0===n?void 0:n.uid)||-1})),[n]),R=(0,x.mN)({resolver:(0,v.t)(u),defaultValues:M}),$=(0,i.wA)(),D=(0,C.A)(),{reset:E,watch:z,control:P,setError:N,setValue:T,handleSubmit:L,formState:{isSubmitting:Y}}=R,O=z(),[H,X]=(0,o.useState)(!1);(0,o.useEffect)((()=>{r&&n&&E(M),r||E(M)}),[r,n]);const{countries:F,genres:G,maritals:U,usertypeids:W}=(0,i.d4)((e=>e.generale));(0,o.useEffect)((()=>{$((0,S.HS)()),$((0,S.Gz)()),$((0,S.X6)()),$((0,S.bC)())}),[$]);const V=(0,o.useCallback)((e=>{const r=e[0];r&&T("photo",Object.assign(r,{preview:URL.createObjectURL(r)})),X(!0)}),[T]),{fields:Z,append:K,remove:Q}=(0,x.jz)({control:P,name:"user_pieces_ids"});return(0,B.jsx)(k.Op,{methods:R,onSubmit:L((async()=>{try{const e=new FormData;if(Object.entries(O).forEach((r=>{let[n,o]=r;["photo","percent","percent_more","keyId"].includes(n)||("born_date"===n?e.append(n,(0,_.R$)(o)):e.append(n,o))})),H&&e.append("photo",O.photo),e.append("percent",O.percent),e.append("percent_more",O.percent_more),e.append("keyId",O.keyId),r){const r=await(0,c.I8)(e);$((0,c.vX)(r))}else{const r=await(0,c.C1)(e);$((0,c.Zu)(r))}X(!1),E(),p(d(r?"success.UPDATED":"success.CREATE")),a(l.nB.supervisor.list)}catch(C){console.error(C);const r=(0,q.A)(C);if(p(d(`error.${r}`),{variant:"error"}),D.current){var e,n,o,s,t,i,u,m,x,v,h,f,b,j,g,y,A,w,k,S;if(null!==(e=C.response)&&void 0!==e&&null!==(n=e.data)&&void 0!==n&&n.phone)N("phone",{...C,message:null===(h=C.response)||void 0===h||null===(f=h.data)||void 0===f?void 0:f.phone});if(null!==(o=C.response)&&void 0!==o&&null!==(s=o.data)&&void 0!==s&&s.born_date)N("born_date",{...C,message:null===(b=C.response)||void 0===b||null===(j=b.data)||void 0===j?void 0:j.born_date});if(null!==(t=C.response)&&void 0!==t&&null!==(i=t.data)&&void 0!==i&&i.username)N("username",{...C,message:null===(g=C.response)||void 0===g||null===(y=g.data)||void 0===y?void 0:y.username});if(C.response.data.email?N("email",{...C,message:C.response.data.email}):C.response.data.non_field_errors&&N("email",{...C,message:C.response.data.non_field_errors}),null!==(u=C.response)&&void 0!==u&&null!==(m=u.data)&&void 0!==m&&m.photo)N("photo",{...C,message:null===(A=C.response)||void 0===A||null===(w=A.data)||void 0===w?void 0:w.photo});if(null!==(x=C.response)&&void 0!==x&&null!==(v=x.data)&&void 0!==v&&v.percent_more)N("percent_more",{...C,message:null===(k=C.response)||void 0===k||null===(S=k.data)||void 0===S?void 0:S.percent_more})}}})),children:(0,B.jsxs)(f.Ay,{container:!0,spacing:3,children:[(0,B.jsx)(f.Ay,{item:!0,xs:12,md:4,children:(0,B.jsxs)(b.A,{sx:{py:10,px:3},children:[r&&(0,B.jsx)(w.A,{color:O.is_block?"error":"success",sx:{textTransform:"uppercase",position:"absolute",top:24,right:24},children:O.is_block?"Banned":"Active"}),(0,B.jsx)(j.A,{sx:{mb:5},children:(0,B.jsx)(k.BF,{name:"photo",accept:"image/*",maxSize:3145728,onDrop:V,helperText:(0,B.jsxs)(g.A,{variant:"caption",sx:{mt:2,mx:"auto",display:"block",textAlign:"center",color:"text.secondary"},children:["Allowed *.jpeg, *.jpg, *.png, *.gif",(0,B.jsx)("br",{})," max size of ",(0,A.tm)(3145728)]})})}),r&&(0,B.jsx)(k.b8,{name:"is_block",labelPlacement:"start",label:(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(g.A,{variant:"subtitle2",sx:{mb:.5},children:"Banned"}),(0,B.jsx)(g.A,{variant:"body2",sx:{color:"text.secondary"},children:"Apply disable account"})]}),sx:{mx:0,mb:3,width:1,justifyContent:"space-between"}}),(0,B.jsx)(k.b8,{name:"transfer_opt_in",labelPlacement:"start",label:(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(g.A,{variant:"subtitle2",sx:{mb:.5},children:d("intl_transfer_title")}),(0,B.jsx)(g.A,{variant:"body2",sx:{color:"text.secondary"},children:d("intl_transfer_desc")})]}),sx:{mx:0,mb:3,width:1,justifyContent:"space-between"}})]})}),(0,B.jsx)(f.Ay,{item:!0,xs:12,md:8,children:(0,B.jsxs)(b.A,{sx:{p:3},children:[(0,B.jsxs)(j.A,{sx:{display:"grid",columnGap:2,rowGap:3,gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(2, 1fr)"}},children:[(0,B.jsx)(k.o3,{type:"email",name:"email",label:d("field.email")}),(0,B.jsx)(k.nU,{name:"phone",label:d("field.phone")}),(0,B.jsx)(k.o3,{name:"first_name",label:d("field.first_name")}),(0,B.jsx)(k.o3,{name:"last_name",label:d("field.last_name")}),(0,B.jsx)(k.zl,{name:"born_date",maxDate:new Date,label:d("field.born_date")}),(0,B.jsxs)(k.tX,{name:"genre",label:d("field.genre"),placeholder:d("field.genre"),children:[(0,B.jsx)("option",{value:""}),null===G||void 0===G?void 0:G.map((e=>(0,B.jsx)("option",{value:e,children:d(`genre.${e}`)},e)))]}),(0,B.jsxs)(k.tX,{name:"marital",label:d("field.marital"),placeholder:d("field.marital"),children:[(0,B.jsx)("option",{value:""}),null===U||void 0===U?void 0:U.map((e=>(0,B.jsx)("option",{value:e,children:d(`marital.${e}`)},e)))]}),(0,B.jsxs)(k.tX,{name:"country",label:d("field.country"),placeholder:d("field.country"),children:[(0,B.jsx)("option",{value:""}),null===F||void 0===F?void 0:F.map((e=>(0,B.jsx)("option",{value:e.id,children:d(`country.${e.name}`)},e.id)))]}),(0,B.jsx)(k.o3,{name:"city",label:d("field.city")}),(0,B.jsx)(k.o3,{name:"address",label:d("field.address")}),(0,B.jsx)(k.o3,{name:"percent",label:d("field.percent")}),(0,B.jsx)(k.o3,{name:"percent_more",label:`${d("field.percent")} more`}),(0,B.jsx)(k.o3,{name:"password",label:d("field.password")}),(0,B.jsx)(k.o3,{name:"description",multiline:!0,rows:4,label:"Description"})]}),(0,B.jsx)(y.A,{alignItems:"flex-end",sx:{mt:3},children:(0,B.jsx)(h.A,{type:"submit",variant:"contained",loading:Y,children:r?d("params.save_change"):d("params.create",{obj:d("p_supervisor.supervisor")})})})]})})]})})}function R(){const{themeStretch:e}=(0,d.A)(),{t:r}=(0,I.B)(),n=(0,t.Zp)(),m=(0,i.wA)(),{enqueueSnackbar:x}=(0,s.dh)(),{pathname:v}=(0,t.zy)(),{supervisorKey:h=""}=(0,t.g)(),f=v.includes("edit"),[b,j]=(0,o.useState)(null);(0,o.useEffect)((()=>{f&&g(),m((0,c.Au)(1,1))}),[h]);const g=async()=>{try{const e=await(0,c.Nk)(h);j(e)}catch(e){console.error(e);const r=(0,q.A)(e);x(r,{variant:"error"}),n(l.nB.supervisor.supervisor)}};return(0,B.jsx)(p.A,{title:`Configuration: ${r(f?"p_supervisor.edit_supervisor":"p_supervisor.new_supervisor")}`,children:(0,B.jsxs)(a.A,{maxWidth:!e&&"lg",children:[(0,B.jsx)(u.A,{heading:r(f?"p_supervisor.edit_supervisor":"p_supervisor.new_supervisor"),links:[{name:r("params.dashboard"),href:l.nB.root},{name:r("p_supervisor.supervisor"),href:l.nB.supervisor.root},{name:f?`${r("p_supervisor.supervisor")} ${null===b||void 0===b?void 0:b.full_name}`:r("p_supervisor.new_supervisor")}]}),(0,B.jsx)(M,{isEdit:f,currentSupervisor:b})]})})}}}]);
//# sourceMappingURL=335.6cc6fcb0.chunk.js.map