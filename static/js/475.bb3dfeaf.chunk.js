"use strict";(self.webpackChunkbling_staff=self.webpackChunkbling_staff||[]).push([[475],{1386:(e,r,n)=>{n.d(r,{R$:()=>t,ts:()=>l,uK:()=>s});var o=n(69525);function t(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"MM-dd-yyyy";return(0,o.A)(new Date(e),r)}function l(e){return(0,o.A)(new Date(e),"dd MMMM yyyy")}function s(e){return(0,o.A)(new Date(e),"dd MMM yyyy HH:mm")}},22698:(e,r,n)=>{n.d(r,{A:()=>B});var o=n(58168),t=n(98587),l=n(65043),s=(n(2086),n(69292)),a=n(98610),i=n(32463),d=n(34535),c=n(72876),p=n(85865),u=n(84794),m=n(66734),v=n(70579);const x=(0,m.A)((0,v.jsx)("path",{d:"M6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}),"MoreHoriz");var h=n(75429);const f=["slots","slotProps"],b=(0,d.Ay)(h.A)((e=>{let{theme:r}=e;return(0,o.A)({display:"flex",marginLeft:`calc(${r.spacing(1)} * 0.5)`,marginRight:`calc(${r.spacing(1)} * 0.5)`},"light"===r.palette.mode?{backgroundColor:r.palette.grey[100],color:r.palette.grey[700]}:{backgroundColor:r.palette.grey[700],color:r.palette.grey[100]},{borderRadius:2,"&:hover, &:focus":(0,o.A)({},"light"===r.palette.mode?{backgroundColor:r.palette.grey[200]}:{backgroundColor:r.palette.grey[600]}),"&:active":(0,o.A)({boxShadow:r.shadows[0]},"light"===r.palette.mode?{backgroundColor:(0,u.tL)(r.palette.grey[200],.12)}:{backgroundColor:(0,u.tL)(r.palette.grey[600],.12)})})})),j=(0,d.Ay)(x)({width:24,height:16});const g=function(e){const{slots:r={},slotProps:n={}}=e,l=(0,t.A)(e,f),s=e;return(0,v.jsx)("li",{children:(0,v.jsx)(b,(0,o.A)({focusRipple:!0},l,{ownerState:s,children:(0,v.jsx)(j,(0,o.A)({as:r.CollapsedIcon,ownerState:s},n.collapsedIcon))}))})};var y=n(92532),_=n(72372);function A(e){return(0,_.Ay)("MuiBreadcrumbs",e)}const w=(0,y.A)("MuiBreadcrumbs",["root","ol","li","separator"]),k=["children","className","component","slots","slotProps","expandText","itemsAfterCollapse","itemsBeforeCollapse","maxItems","separator"],q=(0,d.Ay)(p.A,{name:"MuiBreadcrumbs",slot:"Root",overridesResolver:(e,r)=>[{[`& .${w.li}`]:r.li},r.root]})({}),C=(0,d.Ay)("ol",{name:"MuiBreadcrumbs",slot:"Ol",overridesResolver:(e,r)=>r.ol})({display:"flex",flexWrap:"wrap",alignItems:"center",padding:0,margin:0,listStyle:"none"}),S=(0,d.Ay)("li",{name:"MuiBreadcrumbs",slot:"Separator",overridesResolver:(e,r)=>r.separator})({display:"flex",userSelect:"none",marginLeft:8,marginRight:8});function I(e,r,n,o){return e.reduce(((t,l,s)=>(s<e.length-1?t=t.concat(l,(0,v.jsx)(S,{"aria-hidden":!0,className:r,ownerState:o,children:n},`separator-${s}`)):t.push(l),t)),[])}const B=l.forwardRef((function(e,r){const n=(0,c.A)({props:e,name:"MuiBreadcrumbs"}),{children:d,className:p,component:u="nav",slots:m={},slotProps:x={},expandText:h="Show path",itemsAfterCollapse:f=1,itemsBeforeCollapse:b=1,maxItems:j=8,separator:y="/"}=n,_=(0,t.A)(n,k),[w,S]=l.useState(!1),B=(0,o.A)({},n,{component:u,expanded:w,expandText:h,itemsAfterCollapse:f,itemsBeforeCollapse:b,maxItems:j,separator:y}),M=(e=>{const{classes:r}=e;return(0,a.A)({root:["root"],li:["li"],ol:["ol"],separator:["separator"]},A,r)})(B),R=(0,i.Q)({elementType:m.CollapsedIcon,externalSlotProps:x.collapsedIcon,ownerState:B}),$=l.useRef(null),D=l.Children.toArray(d).filter((e=>l.isValidElement(e))).map(((e,r)=>(0,v.jsx)("li",{className:M.li,children:e},`child-${r}`)));return(0,v.jsx)(q,(0,o.A)({ref:r,component:u,color:"text.secondary",className:(0,s.A)(M.root,p),ownerState:B},_,{children:(0,v.jsx)(C,{className:M.ol,ref:$,ownerState:B,children:I(w||j&&D.length<=j?D:(e=>b+f>=e.length?e:[...e.slice(0,b),(0,v.jsx)(g,{"aria-label":h,slots:{CollapsedIcon:m.CollapsedIcon},slotProps:{collapsedIcon:R},onClick:()=>{S(!0);const e=$.current.querySelector("a[href],button,[tabindex]");e&&e.focus()}},"ellipsis"),...e.slice(e.length-f,e.length)])(D),M.separator,y,B)})}))}))},24753:(e,r,n)=>{n.d(r,{A:()=>m});var o=n(90620),t=n.n(o),l=n(96446),s=n(85865),a=n(88446),i=n(35475),d=n(22698),c=n(70579);function p(e){let{links:r,activeLast:n=!1,...o}=e;const t=r[r.length-1].name,a=r.map((e=>(0,c.jsx)(u,{link:e},e.name))),i=r.map((e=>(0,c.jsx)("div",{children:e.name!==t?(0,c.jsx)(u,{link:e}):(0,c.jsx)(s.A,{variant:"body2",sx:{maxWidth:260,overflow:"hidden",whiteSpace:"nowrap",color:"text.disabled",textOverflow:"ellipsis"},children:t})},e.name)));return(0,c.jsx)(d.A,{separator:(0,c.jsx)(l.A,{component:"span",sx:{width:4,height:4,borderRadius:"50%",bgcolor:"text.disabled"}}),...o,children:n?a:i})}function u(e){let{link:r}=e;const{href:n,name:o,icon:t}=r;return(0,c.jsxs)(a.A,{variant:"body2",component:i.N_,to:n||"#",sx:{lineHeight:2,display:"flex",alignItems:"center",color:"text.primary","& > div":{display:"inherit"}},children:[t&&(0,c.jsx)(l.A,{sx:{mr:1,"& svg":{width:20,height:20}},children:t}),o]},o)}function m(e){let{links:r,action:n,heading:o,moreLink:i=[],sx:d,...u}=e;return(0,c.jsxs)(l.A,{sx:{mb:5,...d},children:[(0,c.jsxs)(l.A,{sx:{display:"flex",alignItems:"center"},children:[(0,c.jsxs)(l.A,{sx:{flexGrow:1},children:[(0,c.jsx)(s.A,{variant:"h4",gutterBottom:!0,children:o}),(0,c.jsx)(p,{links:r,...u})]}),n&&(0,c.jsx)(l.A,{sx:{flexShrink:0},children:n})]}),(0,c.jsx)(l.A,{sx:{mt:2},children:t()(i)?(0,c.jsx)(a.A,{href:i,target:"_blank",rel:"noopener",variant:"body2",children:i}):i.map((e=>(0,c.jsx)(a.A,{noWrap:!0,href:e,variant:"body2",target:"_blank",rel:"noopener",sx:{display:"table"},children:e},e)))})]})}},34475:(e,r,n)=>{n.r(r),n.d(r,{default:()=>$});var o=n(65043),t=n(83665),l=n(73216),s=n(19252),a=n(48407),i=n(56056),d=n(11737),c=n(27720),p=n(18175),u=n(19838),m=n(24753),v=n(73033),x=n(24858),h=n(18403),f=n(72812),b=n(68903),j=n(12110),g=n(96446),y=n(85865),_=n(88911),A=n(73338),w=n(1386),k=n(50467),q=n(73601),C=n(34866),S=n(43409),I=n(50716),B=n(14961),M=n(70579);function R(e){var r;let{isEdit:n,currentAgent:s}=e;const d=(0,l.Zp)(),{t:p}=(0,B.B)(),{enqueueSnackbar:u}=(0,t.dh)(),m=(v.Ik().shape({type_id:v.Yj().required(p("field.required",{obj:p("field.type_id")})),number_id:v.Yj().required(p("field.required",{obj:p("field.number_id")})),created_on:v.Yj().required(p("field.required",{obj:p("field.created_on")})),expired_on:v.Yj().required(p("field.required",{obj:p("field.expired_on")}))}),v.Ik().shape({phone:v.Yj().required(p("field.required",{obj:p("field.phone")})),first_name:v.Yj().required(p("field.required",{obj:p("field.first_name")})),last_name:v.Yj().required(p("field.required",{obj:p("field.last_name")})),country:v.Yj().required(p("field.required",{obj:p("field.country")})),city:v.Yj().required(p("field.required",{obj:p("field.city")})),address:v.Yj().required(p("field.required",{obj:p("field.address")})),percent:v.ai().required(p("field.required",{obj:p("field.percent")})),percent_more:v.ai().required(p("field.required",{obj:`${p("field.percent")} more`})),serie:v.ai().required(p("field.required",{obj:p("field.serie")}))})),R=(0,o.useMemo)((()=>({username:(null===s||void 0===s?void 0:s.username)||"",email:(null===s||void 0===s?void 0:s.email)||"",phone:(null===s||void 0===s?void 0:s.phone)||"",first_name:(null===s||void 0===s?void 0:s.first_name)||"",last_name:(null===s||void 0===s?void 0:s.last_name)||"",photo:(null===s||void 0===s?void 0:s.photo)||null,country:(null===s||void 0===s?void 0:s.country)||"",city:(null===s||void 0===s?void 0:s.city)||"",address:(null===s||void 0===s?void 0:s.address)||"",born_date:(0,w.R$)((null===s||void 0===s?void 0:s.born_date)||new Date),is_block:(null===s||void 0===s?void 0:s.is_block)||!1,jackpot_opt_in:(null===s||void 0===s?void 0:s.jackpot_opt_in)||!1,transfer_opt_in:(null===s||void 0===s?void 0:s.transfer_opt_in)||!1,genre:(null===s||void 0===s?void 0:s.genre)||"",marital:(null===s||void 0===s?void 0:s.marital)||"",description:(null===s||void 0===s?void 0:s.description)||"",percent:(null===s||void 0===s?void 0:s.percent)||0,percent_more:(null===s||void 0===s?void 0:s.percent_more)||0,serie:(null===s||void 0===s?void 0:s.serie)||0,supervisor:(null===s||void 0===s?void 0:s.supervisor)||null,password:null,keyId:(null===s||void 0===s?void 0:s.uid)||-1})),[s]),$=(0,x.mN)({resolver:(0,h.t)(m),defaultValues:R}),D=(0,i.wA)(),E=(0,S.A)(),{reset:P,watch:Y,control:z,setError:T,setValue:L,handleSubmit:N,formState:{isSubmitting:F}}=$,O=Y(),[W,H]=(0,o.useState)(!1);(0,o.useEffect)((()=>{n&&s&&P(R),n||P(R)}),[n,s]);const{countries:U,genres:X,maritals:G,usertypeids:V}=(0,i.d4)((e=>e.generale)),{selectsupervisors:K}=(0,i.d4)((e=>e.supervisor));(0,o.useEffect)((()=>{D((0,C.HS)()),D((0,C.Gz)()),D((0,C.X6)()),D((0,C.bC)())}),[D]);const Z=(0,o.useCallback)((e=>{const r=e[0];r&&L("photo",Object.assign(r,{preview:URL.createObjectURL(r)})),H(!0)}),[L]),{fields:Q,append:J,remove:ee}=(0,x.jz)({control:z,name:"user_pieces_ids"});return(0,M.jsx)(q.Op,{methods:$,onSubmit:N((async()=>{try{const e=new FormData;if(Object.entries(O).forEach((r=>{let[n,o]=r;["photo","percent","percent_more","serie","keyId","supervisor"].includes(n)||("born_date"===n?e.append(n,(0,w.R$)(o)):e.append(n,o))})),W&&e.append("photo",O.photo),e.append("percent",O.percent),e.append("percent_more",O.percent_more),e.append("serie",O.serie),O.supervisor&&e.append("supervisor",O.supervisor),e.append("keyId",O.keyId),n){const r=await(0,c.x4)(e);D((0,c.sb)(r))}else{const r=await(0,c.bj)(e);D((0,c.Yr)(r))}H(!1),P(),u(p(n?"success.UPDATED":"success.CREATE")),d(a.nB.agent.list)}catch(R){console.error(R);const n=(0,I.A)(R);if(u(p(`error.${n}`),{variant:"error"}),E.current){var e,r,o,t,l,s,i,m,v,x,h,f,b,j,g,y,_,A,k,q,C,S,B,M;if(null!==(e=R.response)&&void 0!==e&&null!==(r=e.data)&&void 0!==r&&r.phone)T("phone",{...R,message:null===(b=R.response)||void 0===b||null===(j=b.data)||void 0===j?void 0:j.phone});if(null!==(o=R.response)&&void 0!==o&&null!==(t=o.data)&&void 0!==t&&t.born_date)T("born_date",{...R,message:null===(g=R.response)||void 0===g||null===(y=g.data)||void 0===y?void 0:y.born_date});if(null!==(l=R.response)&&void 0!==l&&null!==(s=l.data)&&void 0!==s&&s.username)T("username",{...R,message:null===(_=R.response)||void 0===_||null===(A=_.data)||void 0===A?void 0:A.username});if(R.response.data.email?T("email",{...R,message:R.response.data.email}):R.response.data.non_field_errors&&T("email",{...R,message:R.response.data.non_field_errors}),null!==(i=R.response)&&void 0!==i&&null!==(m=i.data)&&void 0!==m&&m.supervisor)T("supervisor",{...R,message:null===(k=R.response)||void 0===k||null===(q=k.data)||void 0===q?void 0:q.supervisor});if(null!==(v=R.response)&&void 0!==v&&null!==(x=v.data)&&void 0!==x&&x.photo)T("photo",{...R,message:null===(C=R.response)||void 0===C||null===(S=C.data)||void 0===S?void 0:S.photo});if(null!==(h=R.response)&&void 0!==h&&null!==(f=h.data)&&void 0!==f&&f.percent_more)T("percent_more",{...R,message:null===(B=R.response)||void 0===B||null===(M=B.data)||void 0===M?void 0:M.percent_more})}}})),children:(0,M.jsxs)(b.Ay,{container:!0,spacing:3,children:[(0,M.jsx)(b.Ay,{item:!0,xs:12,md:4,children:(0,M.jsxs)(j.A,{sx:{py:10,px:3},children:[n&&(0,M.jsx)(k.A,{color:O.is_block?"error":"success",sx:{textTransform:"uppercase",position:"absolute",top:24,right:24},children:O.is_block?"Banned":"Active"}),(0,M.jsx)(g.A,{sx:{mb:5},children:(0,M.jsx)(q.BF,{name:"photo",accept:"image/*",maxSize:3145728,onDrop:Z,helperText:(0,M.jsxs)(y.A,{variant:"caption",sx:{mt:2,mx:"auto",display:"block",textAlign:"center",color:"text.secondary"},children:["Allowed *.jpeg, *.jpg, *.png, *.gif",(0,M.jsx)("br",{})," max size of ",(0,A.tm)(3145728)]})})}),n&&(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(q.b8,{name:"is_block",labelPlacement:"start",label:(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(y.A,{variant:"subtitle2",sx:{mb:.5},children:"Banned"}),(0,M.jsx)(y.A,{variant:"body2",sx:{color:"text.secondary"},children:"Apply disable account"})]}),sx:{mx:0,mb:3,width:1,justifyContent:"space-between"}}),(0,M.jsx)(q.b8,{name:"jackpot_opt_in",labelPlacement:"start",label:(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(y.A,{variant:"subtitle2",sx:{mb:.5},children:p("participate_jackpot_title")}),(0,M.jsx)(y.A,{variant:"body2",sx:{color:"text.secondary"},children:p("participate_jackpot_desc")})]}),sx:{mx:0,mb:3,width:1,justifyContent:"space-between"}}),(0,M.jsx)(q.b8,{name:"transfer_opt_in",labelPlacement:"start",label:(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(y.A,{variant:"subtitle2",sx:{mb:.5},children:p("intl_transfer_title")}),(0,M.jsx)(y.A,{variant:"body2",sx:{color:"text.secondary"},children:p("intl_transfer_desc")})]}),sx:{mx:0,mb:3,width:1,justifyContent:"space-between"}})]})]})}),(0,M.jsx)(b.Ay,{item:!0,xs:12,md:8,children:(0,M.jsxs)(j.A,{sx:{p:3},children:[(0,M.jsxs)(g.A,{sx:{display:"grid",columnGap:2,rowGap:3,gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(2, 1fr)"}},children:[(0,M.jsxs)(q.tX,{name:"supervisor",label:p("field.supervisor"),placeholder:p("field.supervisor"),children:[(0,M.jsx)("option",{value:""}),null===K||void 0===K||null===(r=K.data)||void 0===r?void 0:r.map((e=>(0,M.jsx)("option",{value:e.uid,children:e.full_name},e.uid)))]}),(0,M.jsx)(q.o3,{type:"email",name:"email",label:p("field.email")}),(0,M.jsx)(q.nU,{name:"phone",label:p("field.phone")}),(0,M.jsx)(q.o3,{name:"first_name",label:p("field.first_name")}),(0,M.jsx)(q.o3,{name:"last_name",label:p("field.last_name")}),(0,M.jsx)(q.zl,{name:"born_date",maxDate:new Date,label:p("field.born_date")}),(0,M.jsxs)(q.tX,{name:"genre",label:p("field.genre"),placeholder:p("field.genre"),children:[(0,M.jsx)("option",{value:""}),null===X||void 0===X?void 0:X.map((e=>(0,M.jsx)("option",{value:e,children:p(`genre.${e}`)},e)))]}),(0,M.jsxs)(q.tX,{name:"marital",label:p("field.marital"),placeholder:p("field.marital"),children:[(0,M.jsx)("option",{value:""}),null===G||void 0===G?void 0:G.map((e=>(0,M.jsx)("option",{value:e,children:p(`marital.${e}`)},e)))]}),(0,M.jsxs)(q.tX,{name:"country",label:p("field.country"),placeholder:p("field.country"),children:[(0,M.jsx)("option",{value:""}),null===U||void 0===U?void 0:U.map((e=>(0,M.jsx)("option",{value:e.id,children:p(`country.${e.name}`)},e.id)))]}),(0,M.jsx)(q.o3,{name:"city",label:p("field.city")}),(0,M.jsx)(q.o3,{name:"address",label:p("field.address")}),(0,M.jsx)(q.o3,{name:"percent",label:p("field.percent")}),(0,M.jsx)(q.o3,{name:"percent_more",label:`${p("field.percent")} more`}),(0,M.jsx)(q.o3,{name:"serie",label:p("field.serie")}),(0,M.jsx)(q.o3,{name:"password",label:p("field.password")}),(0,M.jsx)(q.o3,{name:"description",multiline:!0,rows:4,label:"Description"})]}),(0,M.jsx)(_.A,{alignItems:"flex-end",sx:{mt:3},children:(0,M.jsx)(f.A,{type:"submit",variant:"contained",loading:F,children:n?p("params.save_change"):p("params.create",{obj:p("p_vendor.vendor")})})})]})})]})})}function $(){const{themeStretch:e}=(0,d.A)(),{t:r}=(0,B.B)(),n=(0,l.Zp)(),v=(0,i.wA)(),{enqueueSnackbar:x}=(0,t.dh)(),{pathname:h}=(0,l.zy)(),{agentKey:f=""}=(0,l.g)(),b=h.includes("edit"),[j,g]=(0,o.useState)(null);(0,o.useEffect)((()=>{b&&y(),v((0,p.bW)()),v((0,c.vt)(1,1))}),[f]);const y=async()=>{try{const e=await(0,c.WU)(f);g(e)}catch(e){console.error(e);const r=(0,I.A)(e);x(r,{variant:"error"}),n(a.nB.agent.agent)}};return(0,M.jsx)(u.A,{title:`Configuration: ${r(b?"p_vendor.edit_vendor":"p_vendor.new_vendor")}`,children:(0,M.jsxs)(s.A,{maxWidth:!e&&"lg",children:[(0,M.jsx)(m.A,{heading:r(b?"p_vendor.edit_vendor":"p_vendor.new_vendor"),links:[{name:r("params.dashboard"),href:a.nB.root},{name:r("p_vendor.vendor"),href:a.nB.agent.root},{name:b?`${r("p_vendor.vendor")} ${null===j||void 0===j?void 0:j.full_name}`:r("p_vendor.new_vendor")}]}),(0,M.jsx)(R,{isEdit:b,currentAgent:j})]})})}},50716:(e,r,n)=>{n.d(r,{A:()=>o});const o=e=>{var r;if(null!==(r=e.response)&&void 0!==r&&r.data){if("string"===typeof e.response.data)return e.response.data;if(Array.isArray(e.response.data))return e.response.data[0];if(e.response.data.detail)return e.response.data.detail}return"An error occurred. Please try again."}}}]);
//# sourceMappingURL=475.bb3dfeaf.chunk.js.map