"use strict";(self.webpackChunkbling_staff=self.webpackChunkbling_staff||[]).push([[618],{24753:(e,i,n)=>{n.d(i,{A:()=>y});var a=n(90620),r=n.n(a),t=n(96446),d=n(85865),l=n(88446),s=n(35475),c=n(22698),o=n(70579);function _(e){let{links:i,activeLast:n=!1,...a}=e;const r=i[i.length-1].name,l=i.map((e=>(0,o.jsx)(f,{link:e},e.name))),s=i.map((e=>(0,o.jsx)("div",{children:e.name!==r?(0,o.jsx)(f,{link:e}):(0,o.jsx)(d.A,{variant:"body2",sx:{maxWidth:260,overflow:"hidden",whiteSpace:"nowrap",color:"text.disabled",textOverflow:"ellipsis"},children:r})},e.name)));return(0,o.jsx)(c.A,{separator:(0,o.jsx)(t.A,{component:"span",sx:{width:4,height:4,borderRadius:"50%",bgcolor:"text.disabled"}}),...a,children:n?l:s})}function f(e){let{link:i}=e;const{href:n,name:a,icon:r}=i;return(0,o.jsxs)(l.A,{variant:"body2",component:s.N_,to:n||"#",sx:{lineHeight:2,display:"flex",alignItems:"center",color:"text.primary","& > div":{display:"inherit"}},children:[r&&(0,o.jsx)(t.A,{sx:{mr:1,"& svg":{width:20,height:20}},children:r}),a]},a)}function y(e){let{links:i,action:n,heading:a,moreLink:s=[],sx:c,...f}=e;return(0,o.jsxs)(t.A,{sx:{mb:5,...c},children:[(0,o.jsxs)(t.A,{sx:{display:"flex",alignItems:"center"},children:[(0,o.jsxs)(t.A,{sx:{flexGrow:1},children:[(0,o.jsx)(d.A,{variant:"h4",gutterBottom:!0,children:a}),(0,o.jsx)(_,{links:i,...f})]}),n&&(0,o.jsx)(t.A,{sx:{flexShrink:0},children:n})]}),(0,o.jsx)(t.A,{sx:{mt:2},children:r()(s)?(0,o.jsx)(l.A,{href:s,target:"_blank",rel:"noopener",variant:"body2",children:s}):s.map((e=>(0,o.jsx)(l.A,{noWrap:!0,href:e,variant:"body2",target:"_blank",rel:"noopener",sx:{display:"table"},children:e},e)))})]})}},50716:(e,i,n)=>{n.d(i,{A:()=>a});const a=e=>{var i;if(null!==(i=e.response)&&void 0!==i&&i.data){if("string"===typeof e.response.data)return e.response.data;if(Array.isArray(e.response.data))return e.response.data[0];if(e.response.data.detail)return e.response.data.detail}return"An error occurred. Please try again."}},98618:(e,i,n)=>{n.r(i),n.d(i,{default:()=>$});var a=n(65043),r=n(83665),t=n(19252),d=n(88911),l=n(35866),s=n(72812),c=n(48407),o=n(11737),_=n(19838),f=n(24753),y=n(76053),u=n(12110),b=n(85865),m=n(68903),h=n(32143),v=n(72035),x=n(39336),p=n(14961),A=n(56056),j=n(63025),g=n(70579);const k=e=>String((null===e||void 0===e?void 0:e.code)||(null===e||void 0===e?void 0:e.iso_code)||(null===e||void 0===e?void 0:e.country_code)||(null===e||void 0===e?void 0:e.value)||(null===e||void 0===e?void 0:e.id)||""),W=e=>(null===e||void 0===e?void 0:e.name)||(null===e||void 0===e?void 0:e.label)||(null===e||void 0===e?void 0:e.description)||"",C=(e,i)=>{const n=String(i||"");return e.find((e=>k(e)===n))||null},S=C,I=e=>String((null===e||void 0===e?void 0:e.value)||(null===e||void 0===e?void 0:e.code)||(null===e||void 0===e?void 0:e.key)||""),w=e=>(null===e||void 0===e?void 0:e.label)||(null===e||void 0===e?void 0:e.name)||(null===e||void 0===e?void 0:e.description)||I(e),P=e=>String((null===e||void 0===e?void 0:e.value)||(null===e||void 0===e?void 0:e.code)||(null===e||void 0===e?void 0:e.key)||""),O=e=>(null===e||void 0===e?void 0:e.label)||(null===e||void 0===e?void 0:e.name)||(null===e||void 0===e?void 0:e.description)||P(e),T=e=>String((null===e||void 0===e?void 0:e.id)||(null===e||void 0===e?void 0:e.value)||(null===e||void 0===e?void 0:e.code)||(null===e||void 0===e?void 0:e.state_id)||""),B=e=>(null===e||void 0===e?void 0:e.name)||(null===e||void 0===e?void 0:e.label)||(null===e||void 0===e?void 0:e.description)||(null===e||void 0===e?void 0:e.state_name)||"",L=e=>String((null===e||void 0===e?void 0:e.state_id)||(null===e||void 0===e?void 0:e.stateId)||(null===e||void 0===e?void 0:e.state)||(null===e||void 0===e?void 0:e.state_code)||""),D=e=>String((null===e||void 0===e?void 0:e.id)||(null===e||void 0===e?void 0:e.value)||(null===e||void 0===e?void 0:e.code)||(null===e||void 0===e?void 0:e.city_id)||""),E=e=>(null===e||void 0===e?void 0:e.name)||(null===e||void 0===e?void 0:e.label)||(null===e||void 0===e?void 0:e.description)||(null===e||void 0===e?void 0:e.city_name)||"";function N(e){let{ticket:i,onUpdated:n}=e;const{t:t}=(0,p.B)(),{enqueueSnackbar:c}=(0,r.dh)(),o=(0,A.wA)(),{countries:_,statesByCountry:f,citiesByCountry:N,genders:M,typeDocs:$}=(0,A.d4)((e=>e.remesas)),[F,q]=(0,a.useState)(!1),[H,R]=(0,a.useState)({beneficiary_first_name:"",beneficiary_middle_name:"",beneficiary_last_name:"",beneficiary_maiden_name:"",beneficiary_phone:"",beneficiary_email:"",beneficiary_date_of_birth:"",beneficiary_activity:"",beneficiary_profession:"",beneficiary_position:"",beneficiary_marital_status:"",beneficiary_gender:"",beneficiary_nationality:"",beneficiary_addr_state_id:"",beneficiary_address:"",beneficiary_city_id:"",beneficiary_doc_type:"",beneficiary_doc_number:"",beneficiary_doc_issued_date:"",beneficiary_doc_due_date:"",beneficiary_doc_country:""}),G=(0,a.useMemo)((()=>(M||[]).map((e=>({value:I(e),label:w(e)})))),[M]),U=(0,a.useMemo)((()=>($||[]).map((e=>({value:P(e),label:O(e)})))),[$]),X=(0,a.useMemo)((()=>f[H.beneficiary_nationality]||[]),[f,H.beneficiary_nationality]),z=(0,a.useMemo)((()=>N[H.beneficiary_nationality]||[]),[N,H.beneficiary_nationality]);(0,a.useEffect)((()=>{o((0,j.X6)()),o((0,j.fC)()),o((0,j.IH)())}),[o]),(0,a.useEffect)((()=>{H.beneficiary_nationality&&(o((0,j.s6)(H.beneficiary_nationality)),o((0,j.TF)(H.beneficiary_nationality)))}),[o,H.beneficiary_nationality]),(0,a.useEffect)((()=>{H.beneficiary_addr_state_id&&o((0,j.Wv)(H.beneficiary_addr_state_id))}),[o,H.beneficiary_addr_state_id]),(0,a.useEffect)((()=>{if(!i)return;const e=String(i.beneficiary_nationality||""),n=String(i.beneficiary_addr_state_id||""),a=String(i.beneficiary_city_id||""),r=String(i.beneficiary_doc_country||"");R({beneficiary_first_name:i.beneficiary_first_name||"",beneficiary_middle_name:i.beneficiary_middle_name||"",beneficiary_last_name:i.beneficiary_last_name||"",beneficiary_maiden_name:i.beneficiary_maiden_name||"",beneficiary_phone:i.beneficiary_phone||"",beneficiary_email:i.beneficiary_email||"",beneficiary_date_of_birth:i.beneficiary_date_of_birth||"",beneficiary_activity:i.beneficiary_activity||"",beneficiary_profession:i.beneficiary_profession||"",beneficiary_position:i.beneficiary_position||"",beneficiary_marital_status:i.beneficiary_marital_status||"",beneficiary_gender:i.beneficiary_gender||"",beneficiary_nationality:e,beneficiary_addr_state_id:n,beneficiary_address:i.beneficiary_address||"",beneficiary_city_id:a,beneficiary_doc_type:i.beneficiary_doc_type||"",beneficiary_doc_number:i.beneficiary_doc_number||"",beneficiary_doc_issued_date:i.beneficiary_doc_issued_date||"",beneficiary_doc_due_date:i.beneficiary_doc_due_date||"",beneficiary_doc_country:r}),e&&(o((0,j.s6)(e)),o((0,j.TF)(e))),n&&o((0,j.Wv)(n))}),[i,o]);const J=e=>i=>{R((n=>({...n,[e]:i.target.value})))};return i?(0,g.jsxs)(d.A,{spacing:3,children:[(0,g.jsxs)(u.A,{sx:{p:3},children:[(0,g.jsx)(b.A,{variant:"h6",sx:{mb:2},children:t("p_ticket.transaction_info","Transaction information")}),(0,g.jsxs)(m.Ay,{container:!0,spacing:2,children:[(0,g.jsx)(m.Ay,{item:!0,xs:12,md:4,children:(0,g.jsx)(l.A,{fullWidth:!0,label:"Transaction ID",value:i.transaction_id||"",InputProps:{readOnly:!0}})}),(0,g.jsx)(m.Ay,{item:!0,xs:12,md:4,children:(0,g.jsx)(l.A,{fullWidth:!0,label:"Ref code",value:i.ref_code||"",InputProps:{readOnly:!0}})}),(0,g.jsx)(m.Ay,{item:!0,xs:12,md:4,children:(0,g.jsx)(l.A,{fullWidth:!0,label:t("field.status","Status"),value:t(`remesas.status_transac.${i.transaction_status}`),InputProps:{readOnly:!0}})}),(0,g.jsx)(m.Ay,{item:!0,xs:12,md:4,children:(0,g.jsx)(l.A,{fullWidth:!0,label:t("field.amount","Amount"),value:i.amount||"",InputProps:{readOnly:!0}})}),(0,g.jsx)(m.Ay,{item:!0,xs:12,md:4,children:(0,g.jsx)(l.A,{fullWidth:!0,label:t("field.currency","Currency"),value:i.currency||"",InputProps:{readOnly:!0}})}),(0,g.jsx)(m.Ay,{item:!0,xs:12,md:4,children:(0,g.jsx)(l.A,{fullWidth:!0,label:t("field.created_on","Created on"),value:i.created_on||"",InputProps:{readOnly:!0}})})]})]}),(0,g.jsxs)(u.A,{sx:{p:3},children:[(0,g.jsx)(b.A,{variant:"h6",sx:{mb:2},children:t("p_ticket.sender_info","Sender information")}),(0,g.jsxs)(m.Ay,{container:!0,spacing:2,children:[(0,g.jsx)(m.Ay,{item:!0,xs:12,md:4,children:(0,g.jsx)(l.A,{fullWidth:!0,label:t("field.full_name","Full name"),value:[i.sender_first_name,i.sender_middle_name,i.sender_last_name].filter(Boolean).join(" ")||"",InputProps:{readOnly:!0}})}),(0,g.jsx)(m.Ay,{item:!0,xs:12,md:4,children:(0,g.jsx)(l.A,{fullWidth:!0,label:t("field.phone","Phone"),value:i.sender_phone||"",InputProps:{readOnly:!0}})}),(0,g.jsx)(m.Ay,{item:!0,xs:12,md:4,children:(0,g.jsx)(l.A,{fullWidth:!0,label:t("field.email","Email"),value:i.sender_email||"",InputProps:{readOnly:!0}})}),(0,g.jsx)(m.Ay,{item:!0,xs:12,md:4,children:(0,g.jsx)(l.A,{fullWidth:!0,label:t("field.city","City"),value:i.sender_city||"",InputProps:{readOnly:!0}})}),(0,g.jsx)(m.Ay,{item:!0,xs:12,md:8,children:(0,g.jsx)(l.A,{fullWidth:!0,label:t("field.address","Address"),value:i.sender_address||"",InputProps:{readOnly:!0}})})]})]}),(0,g.jsxs)(u.A,{sx:{p:3},children:[(0,g.jsx)(d.A,{direction:"row",alignItems:"center",justifyContent:"space-between",sx:{mb:2},children:(0,g.jsx)(b.A,{variant:"h6",children:t("p_ticket.beneficiary_info","Beneficiary information")})}),(0,g.jsxs)(m.Ay,{container:!0,spacing:2,children:[(0,g.jsx)(m.Ay,{item:!0,xs:12,md:3,children:(0,g.jsx)(l.A,{fullWidth:!0,label:t("remesas.form.firstName"),value:H.beneficiary_first_name,onChange:J("beneficiary_first_name")})}),(0,g.jsx)(m.Ay,{item:!0,xs:12,md:3,children:(0,g.jsx)(l.A,{fullWidth:!0,label:t("remesas.form.middleName"),value:H.beneficiary_middle_name,onChange:J("beneficiary_middle_name")})}),(0,g.jsx)(m.Ay,{item:!0,xs:12,md:3,children:(0,g.jsx)(l.A,{fullWidth:!0,label:t("remesas.form.lastName"),value:H.beneficiary_last_name,onChange:J("beneficiary_last_name")})}),(0,g.jsx)(m.Ay,{item:!0,xs:12,md:3,children:(0,g.jsx)(l.A,{fullWidth:!0,label:t("remesas.form.maidenName"),value:H.beneficiary_maiden_name,onChange:J("beneficiary_maiden_name")})}),(0,g.jsx)(m.Ay,{item:!0,xs:12,md:4,children:(0,g.jsx)(l.A,{fullWidth:!0,label:t("remesas.form.phone"),value:H.beneficiary_phone,onChange:J("beneficiary_phone")})}),(0,g.jsx)(m.Ay,{item:!0,xs:12,md:4,children:(0,g.jsx)(l.A,{fullWidth:!0,label:t("remesas.form.email"),value:H.beneficiary_email,onChange:J("beneficiary_email")})}),(0,g.jsx)(m.Ay,{item:!0,xs:12,md:4,children:(0,g.jsx)(l.A,{fullWidth:!0,type:"date",label:t("remesas.form.birthDate"),InputLabelProps:{shrink:!0},value:H.beneficiary_date_of_birth||"",onChange:J("beneficiary_date_of_birth")})}),(0,g.jsx)(m.Ay,{item:!0,xs:12,md:4,children:(0,g.jsx)(l.A,{select:!0,fullWidth:!0,label:t("remesas.form.gender"),value:H.beneficiary_gender,onChange:J("beneficiary_gender"),children:G.map((e=>(0,g.jsx)(h.A,{value:e.value,children:t(`remesas.enums.gender.${e.value}`)},e.value)))})}),(0,g.jsx)(m.Ay,{item:!0,xs:12,md:4,children:(0,g.jsx)(l.A,{fullWidth:!0,label:t("remesas.form.activity"),value:H.beneficiary_activity,onChange:J("beneficiary_activity")})}),(0,g.jsx)(m.Ay,{item:!0,xs:12,md:4,children:(0,g.jsx)(l.A,{fullWidth:!0,label:t("remesas.form.profession"),value:H.beneficiary_profession,onChange:J("beneficiary_profession")})}),(0,g.jsx)(m.Ay,{item:!0,xs:12,md:4,children:(0,g.jsx)(v.A,{fullWidth:!0,options:_,value:C(_,H.beneficiary_nationality),onChange:(e,i)=>R((e=>({...e,beneficiary_nationality:i?k(i):"",beneficiary_addr_state_id:"",beneficiary_city_id:""}))),getOptionLabel:e=>e?W(e):"",renderInput:e=>(0,g.jsx)(l.A,{...e,label:t("remesas.form.nationality")})})}),(0,g.jsx)(m.Ay,{item:!0,xs:12,md:4,children:(0,g.jsx)(l.A,{select:!0,fullWidth:!0,label:t("remesas.common.state"),value:H.beneficiary_addr_state_id,onChange:e=>{const i=String(e.target.value||"");R((e=>({...e,beneficiary_addr_state_id:i,beneficiary_city_id:""})))},disabled:!H.beneficiary_nationality,children:X.map((e=>(0,g.jsx)(h.A,{value:T(e),children:B(e)},T(e))))})}),(0,g.jsx)(m.Ay,{item:!0,xs:12,md:4,children:(0,g.jsx)(v.A,{fullWidth:!0,options:z,value:z.find((e=>D(e)===String(H.beneficiary_city_id||"")))||null,onChange:(e,i)=>R((e=>({...e,beneficiary_city_id:i?D(i):"",beneficiary_addr_state_id:i?L(i):e.beneficiary_addr_state_id}))),getOptionLabel:e=>e?E(e):"",renderInput:e=>(0,g.jsx)(l.A,{...e,label:t("remesas.common.city"),disabled:!H.beneficiary_nationality})})}),(0,g.jsx)(m.Ay,{item:!0,xs:12,children:(0,g.jsx)(l.A,{fullWidth:!0,label:t("remesas.form.address"),value:H.beneficiary_address,onChange:J("beneficiary_address")})}),(0,g.jsx)(m.Ay,{item:!0,xs:12,md:4,children:(0,g.jsx)(l.A,{select:!0,fullWidth:!0,label:t("remesas.form.docType"),value:H.beneficiary_doc_type,onChange:J("beneficiary_doc_type"),children:U.map((e=>(0,g.jsx)(h.A,{value:e.value,children:t(`remesas.enums.docType.${e.value}`)},e.value)))})}),(0,g.jsx)(m.Ay,{item:!0,xs:12,md:4,children:(0,g.jsx)(l.A,{fullWidth:!0,label:t("remesas.form.docNumber"),value:H.beneficiary_doc_number,onChange:J("beneficiary_doc_number")})}),(0,g.jsx)(m.Ay,{item:!0,xs:12,md:2,children:(0,g.jsx)(l.A,{fullWidth:!0,type:"date",label:t("remesas.form.docIssueDate"),InputLabelProps:{shrink:!0},value:H.beneficiary_doc_issued_date||"",onChange:J("beneficiary_doc_issued_date")})}),(0,g.jsx)(m.Ay,{item:!0,xs:12,md:2,children:(0,g.jsx)(l.A,{fullWidth:!0,type:"date",label:t("remesas.form.docDueDate"),InputLabelProps:{shrink:!0},value:H.beneficiary_doc_due_date||"",onChange:J("beneficiary_doc_due_date")})}),(0,g.jsx)(m.Ay,{item:!0,xs:12,md:4,children:(0,g.jsx)(v.A,{fullWidth:!0,options:_,value:S(_,H.beneficiary_doc_country),onChange:(e,i)=>R((e=>({...e,beneficiary_doc_country:i?k(i):""}))),getOptionLabel:e=>e?W(e):"",renderInput:e=>(0,g.jsx)(l.A,{...e,label:t("remesas.form.docCountry")})})})]}),(0,g.jsx)(x.A,{sx:{my:3}}),(0,g.jsx)(d.A,{direction:"row",justifyContent:"flex-end",children:(0,g.jsx)(s.A,{variant:"contained",onClick:async()=>{if(null!==i&&void 0!==i&&i.id){q(!0);try{const e=X.find((e=>T(e)===String(H.beneficiary_addr_state_id||"")))||null,a=z.find((e=>D(e)===String(H.beneficiary_city_id||"")))||null;let r={beneficiary_first_name:H.beneficiary_first_name,beneficiary_middle_name:H.beneficiary_middle_name,beneficiary_last_name:H.beneficiary_last_name,beneficiary_maiden_name:H.beneficiary_maiden_name,beneficiary_phone:H.beneficiary_phone,beneficiary_email:H.beneficiary_email,beneficiary_date_of_birth:H.beneficiary_date_of_birth,beneficiary_activity:H.beneficiary_activity,beneficiary_profession:H.beneficiary_profession,beneficiary_position:H.beneficiary_position,beneficiary_marital_status:H.beneficiary_marital_status,beneficiary_gender:H.beneficiary_gender,beneficiary_nationality:H.beneficiary_nationality,beneficiary_address:H.beneficiary_address,...e&&{beneficiary_addr_state:B(e)},...a&&{beneficiary_city:E(a)},beneficiary_doc_type:H.beneficiary_doc_type,beneficiary_doc_number:H.beneficiary_doc_number,beneficiary_doc_issued_date:H.beneficiary_doc_issued_date,beneficiary_doc_due_date:H.beneficiary_doc_due_date,beneficiary_doc_country:H.beneficiary_doc_country};r=function(e){const i={};for(const n in e){const a=e[n];null!==a&&""!==a&&void 0!==a&&(i[n]=a)}return i}(r);const d=await(0,y.T5)(i.transaction_id,r);c(t("success.ticket_updated","Ticket updated successfully"),{variant:"success"}),n&&n(d)}catch(e){console.error(e),c(t("error.ticket_update_failed","Ticket update failed"),{variant:"error"})}finally{q(!1)}}},loading:F,children:t("remesas.actions.update")})})]})]}):null}var M=n(50716);function $(){const{themeStretch:e}=(0,o.A)(),{t:i}=(0,p.B)(),{enqueueSnackbar:n}=(0,r.dh)(),[u,b]=(0,a.useState)(null),[m,h]=(0,a.useState)(""),[v,x]=(0,a.useState)(!1);return(0,g.jsx)(_.A,{title:`Ticket: ${i("p_ticket.editTicket")}`,children:(0,g.jsxs)(t.A,{maxWidth:!e&&"lg",children:[(0,g.jsx)(f.A,{heading:i("p_ticket.editTicket"),links:[{name:i("params.dashboard"),href:c.nB.root},{name:i("p_ticket.ticket"),href:c.nB.ticket.root},{name:(null===u||void 0===u?void 0:u.full_name)||""}]}),(0,g.jsxs)(d.A,{direction:{xs:"column",sm:"row"},spacing:2,sx:{mb:4},children:[(0,g.jsx)(l.A,{fullWidth:!0,label:i("p_ticket.enter_ticket_id"),value:m,onChange:e=>h(e.target.value)}),(0,g.jsx)(s.A,{variant:"contained",color:"primary",onClick:async()=>{if(m){x(!0);try{const e=await(0,y.Er)(m);b(e)}catch(e){console.error(e);const i=(0,M.A)(e);n(i,{variant:"error"}),b(null)}finally{x(!1)}}},loading:v,sx:{px:4},children:i("p_ticket.search")})]}),u&&(0,g.jsx)(N,{ticket:u})]})})}}}]);
//# sourceMappingURL=618.8c856703.chunk.js.map